
SQL-kyselyjen laatiminen pääkäyttötapauksille ja yksinkertaisen auktorisoinnin (käyttöoikeuksien määrittely) toteuttaminen

///////////////////////////////TENTTI
//Lisätään uusi tentti
INSERT INTO "Tentti" (nimi, tenttipisteet, minimipisteet)
values ('Testitentti', 30, 10);

//Poistetaan tentti
DELETE FROM "Tentti" WHERE nimi='Testitentti';

// Päivitetään tentti
UPDATE "Tentti"
SET nimi = 'Testitentti päivitetty', tenttipisteet= 32
WHERE nimi = 'Testitentti';

////////////////////////////// KYSYMYS
//Lisätään uusi kysymys tiettyyn tenttiin
INSERT INTO "Kysymys" (kysymys, kysymyspisteet, tentti_id)
VALUES ('Kuinka monta testikysymystä tarvitaan?', 3, 
(SELECT id FROM "Tentti" WHERE nimi='Testitentti'));

//Poistetaan kysymys
DELETE FROM "Kysymys" WHERE nimi='Kuinka monta testikysymystä tarvitaan?';

// Päivitetään kysymys
UPDATE "Kysymys"
SET kysymys = 'Kuinka monta testikysymystä tarvitaan (versio 2.0)?'
WHERE kysymys = 'Kuinka monta testikysymystä tarvitaan?';


///////////////////////////////////////VASTAUKSET
//Lisätään uusi vastaus tiettyyn kysymykseen
INSERT INTO "Vastaus" (vastaus, oikea_vastaus, kysymys_id)
VALUES ('Testivastaus 1', true, 
(SELECT id FROM "Kysymys" WHERE kysymys='Testikysymys 1'));

//Poistetaan vastaus
DELETE FROM "Vastaus" WHERE vastaus='Testivastaus 1';

// Päivitetään vastaus
UPDATE "Vastaus"
SET vastaus = 'Testivastaus (versio 2.0)?'
WHERE vastaus = 'Testivastaus 1';

//////////////////////////////////////KÄYTTÄJÄ
//Lisätään uusi käyttäjä
INSERT INTO "Käyttäjä" (etunimi, sukunimi, sähköposti, rooli, salasana)
values ('Alfreds', 'Futterkiste', 'testi@testi.fi', 'admin', 'salasana1234')

//Poistetaan käyttäjä
DELETE FROM "Käyttäjä" WHERE sähköposti='testi@testi.fi';

//Päivitetään käyttäjän nimi
UPDATE "Käyttäjä"
SET etunimi = 'Alfredson'
WHERE sähköposti = 'testi@testi.fi';


////////////////////////////////////KÄYTTÄJÄN VASTAUS
INSERT INTO "KäyttäjänVastaus" (käyttäjän_valinta, vastaus_oikein, käyttäjä_id, vastaus_id)
VALUES (true, true, 
(SELECT id FROM "Käyttäjä" WHERE sähköposti='testi@testi.fi'),
(SELECT id FROM "Vastaus" WHERE vastaus='Testivastaus 1'));

//Poistetaan käyttäjän vastaus
DELETE FROM "KäyttäjänVastaus" WHERE vastaus='Testivastaus 1';

//Päivitetään käyttäjän vastaus
UPDATE "KäyttäjänVastaus"
SET käyttäjän_valinta = false
WHERE sähköposti = 'testi@testi.fi';





